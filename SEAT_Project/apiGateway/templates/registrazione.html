<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel ="stylesheet" href="/static/style.css">
    <title>SEAt | registrazione</title>
  </head>
  <body>
    <div class="seat_container">
        <!-- mi serve un div vuoto per inserire del respiro nella pagina -->
        <div style ="display:flex">
          <div style="height:1vh; width:50%"></div> 
          <div style="padding-left: 15%; padding-right: 50%;">
            {% with messages = get_flashed_messages()%}
              {% if messages %}
                {% for message in messages %}
                  
                <div class="alert alert-warning alert-dismissible fade show"  role="alert">
                  {{message}}
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endfor %}
              {% endif %}
            {% endwith %}
          </div>
  
        </div>
        <div class="seat_content" style="margin-top: 5%;">
          <div>
            <h1>Nuovo utente</h1>          
            <form method="POST" action="/registrazione">
              <!-- Username input -->
              <div class="inputBox">
                <input type="text" name="user" placeholder="username" required/>
              </div>
            
              <!-- Password input -->
              <div class="inputBox">
                <input type="password" name="pwd" placeholder="password" required/>
              </div>

              <!-- Email input -->
              <div class="inputBox">
                <input type="text" name="email" placeholder="email" required/>
              </div>

              <select class="form-select inputBox" onchange="func()" id="admin" name="admin" aria-label="Default select example">
                <option selected>Seleziona il tipo di account da creare</option>
                <option value="1">Amministratore di lido</option>
                <option value="2">Cliente</option>
              </select>
              <div style="display: flex; max-width: 450px; margin-bottom: 2%;">
                <div class="inputBox" id="other_input1"></div>
                <div class="inputBox" id="other_input2" style="margin-left: 1%;"></div>
                <div class="inputBox" id="other_input3" style="margin-left: 1%;"></div>
                <div class="inputBox" id="other_input4" style="margin-left: 1%;"></div>
              </div>
              <div class="form-check form-switch" id="ristorazione_input">
                <input class="form-check-input" type="checkbox" role="switch" name="ristorazione" style="visibility: hidden;" value="ristorazione">
                <label class="form-check-label" for="flexSwitchCheckDefault" style="visibility: hidden;">Ristorazione</label>
              </div>
              <div class="form-check form-switch" id="bar_input">
                <input class="form-check-input" type="checkbox" role="switch" name="bar" style="visibility: hidden;" value="bar">
                <label class="form-check-label" for="flexSwitchCheckDefault" style="visibility: hidden;">Bar</label>
              </div>
              <div class="form-check form-switch" id="campi_input">
                <input class="form-check-input" type="checkbox" role="switch" name="campi" style="visibility: hidden;" value="campi">
                <label class="form-check-label" for="flexSwitchCheckDefault" style="visibility: hidden;">Campi</label>
              </div>
              <div class="form-check form-switch" id="animazione_input">
                <input class="form-check-input" type="checkbox" role="switch" name="animazione" style="visibility: hidden;" value="animazione">
                <label class="form-check-label" for="flexSwitchCheckDefault" style="visibility: hidden;">Animazione</label>
              </div>
              <div class="form-check form-switch" id="palestra_input">
                <input class="form-check-input" type="checkbox" role="switch" name="palestra" style="visibility: hidden;" value="palestra">
                <label class="form-check-label" for="flexSwitchCheckDefault" style="visibility: hidden;">Palestra</label>
              </div>
              
            
              <!-- Submit input -->
              <div class="inputBox" style="margin-left: 70%;">
                <input type="submit" value="Invia"/>
              </div>
              
            </form>
          </div>
          <a href="/">
            <img src="/static/images/img.png" class="feature-img">
          </a>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" style="display: none; height: 30px;">
          
          <symbol id="exclamation-triangle-fill" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </symbol>
        </svg>
          
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script type="text/javascript">
      function func(){
        var user_select = document.getElementById('admin');
        var admin = user_select.options[user_select.selectedIndex].text;
        var div1 = document.getElementById('other_input1');
        var div2 = document.getElementById('other_input2');
        var div3 = document.getElementById('other_input3');
        var div4 = document.getElementById('ristorazione_input');
        var div5 = document.getElementById('bar_input');
        var div6 = document.getElementById('campi_input');
        var div7 = document.getElementById('animazione_input');
        var div8 = document.getElementById('palestra_input');
        var div9 = document.getElementById('other_input4')

        var t;
        
        var input_tags1 = div1.getElementsByTagName('input');
        var input_tags2 = div2.getElementsByTagName('input');
        var input_tags3 = div3.getElementsByTagName('input');
        var input_tags9 = div9.getElementsByTagName('input')
        
        var input_tags4 = div4.getElementsByTagName('input');
        var label4      = div4.getElementsByTagName('label');
        
        var input_tags5 = div5.getElementsByTagName('input');
        var label5      = div5.getElementsByTagName('label');
        
        var input_tags6 = div6.getElementsByTagName('input');
        var label6      = div6.getElementsByTagName('label');
        
        var input_tags7 = div7.getElementsByTagName('input');
        var label7      = div7.getElementsByTagName('label');

        var input_tags8 = div8.getElementsByTagName('input');
        var label8      = div8.getElementsByTagName('label');
        

        // for(t=0; t<input_tags.length;){
        if(admin == "Cliente" && input_tags1.length==1){
          div1.removeChild(input_tags1[0]);
          div2.removeChild(input_tags2[0]);
          div3.removeChild(input_tags3[0]);
          div9.removeChild(input_tags9[0])

          input_tags4[0].style.visibility= "hidden"
          label4[0].style.visibility= "hidden"

          input_tags5[0].style.visibility= "hidden"
          label5[0].style.visibility= "hidden"

          input_tags6[0].style.visibility= "hidden"
          label6[0].style.visibility= "hidden"

          input_tags7[0].style.visibility= "hidden"
          label7[0].style.visibility= "hidden"

          input_tags8[0].style.visibility= "hidden"
          label8[0].style.visibility= "hidden"

        } else if(admin != "Cliente" && input_tags1.length==0){

          var new_field1 = document.createElement('input');
          var new_field2 = document.createElement('input');
          var new_field3 = document.createElement('input');
          var new_field4 = document.createElement('input');

          new_field1.setAttribute('type','text');
          new_field2.setAttribute('type','text');
          new_field3.setAttribute('type','text');
          new_field4.setAttribute('type','text');

          new_field1.setAttribute('name', 'lido');
          new_field2.setAttribute('name', 'locazione');
          new_field3.setAttribute('name', 'numero_carta');
          new_field4.setAttribute('name', 'cvc');
          
          new_field1.setAttribute('placeholder', 'nome lido');
          new_field2.setAttribute('placeholder', 'cittÃ ');
          new_field3.setAttribute('placeholder', 'numero carta');
          new_field4.setAttribute('placeholder', 'cvc');
          
          div1.appendChild(new_field1);
          div2.appendChild(new_field2);
          div3.appendChild(new_field3);
          div9.appendChild(new_field4);

          input_tags4[0].style.visibility= "visible"
          label4[0].style.visibility= "visible"

          input_tags5[0].style.visibility= "visible"
          label5[0].style.visibility= "visible"

          input_tags6[0].style.visibility= "visible"
          label6[0].style.visibility= "visible"

          input_tags7[0].style.visibility= "visible"
          label7[0].style.visibility= "visible"

          input_tags8[0].style.visibility= "visible"
          label8[0].style.visibility= "visible"

        }
      }
    </script>
  </body>
</html>